<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Champions Cup: Full RNG Draw</title>
    <style>
        :root {
            --bg-color: #00151a;
            --accent-cyan: #00f2ff;
            --card-bg: rgba(0, 50, 60, 0.85);
            --text-white: #e0faff;
            --line-color: rgba(0, 242, 255, 0.4);
        }

        body {
            background-color: var(--bg-color);
            background-image: radial-gradient(circle at center, #002b36 0%, #00151a 100%);
            color: var(--text-white);
            font-family: 'Segoe UI', sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        .bracket-outer {
            position: relative;
            padding: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            width: 100%;
            max-width: 1600px;
        }

        .round { display: flex; flex-direction: column; justify-content: space-around; width: 180px; height: 800px; z-index: 2; }
        .round-title { text-align: center; font-size: 0.7em; color: var(--accent-cyan); margin-bottom: 10px; border: 1px solid; padding: 4px; background: rgba(0,0,0,0.6); letter-spacing: 1px; }

        .matchup {
            background: var(--card-bg);
            border: 1px solid rgba(0, 242, 255, 0.2);
            border-radius: 4px;
            margin: 10px 0;
            position: relative;
        }

        .team {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            height: 35px;
            font-size: 0.75em;
            transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        }
        .team img { width: 22px; height: 22px; margin-right: 10px; }
        .team.pre-seeded { background: rgba(0, 242, 255, 0.2); font-weight: bold; border-left: 3px solid var(--accent-cyan); color: var(--accent-cyan); }
        .team.empty { color: #555; font-style: italic; }

        /* Animation */
        .sliding-in { opacity: 0; transform: translateY(-20px) scale(1.1); }
        .slide-active { opacity: 1; transform: translateY(0) scale(1); }

        #connector-canvas {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        /* Draw Zone */
        .draw-zone {
            width: 100%;
            background: rgba(0,0,0,0.9);
            border-top: 3px solid var(--accent-cyan);
            padding: 40px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .pot-label { color: var(--accent-cyan); font-weight: bold; margin: 20px 0 10px 0; text-transform: uppercase; letter-spacing: 2px; }
        .pot-grid {
            display: grid;
            grid-template-columns: repeat(11, 1fr);
            gap: 12px;
            width: 100%;
            max-width: 1300px;
        }

        .pot-team {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px;
            background: rgba(255,255,255,0.05);
            border-radius: 6px;
            font-size: 0.6em;
            transition: 0.4s;
            text-align: center;
        }
        .pot-team img { width: 35px; height: 35px; margin-bottom: 5px; }
        .pot-team.drawn { opacity: 0.1; filter: grayscale(1); transform: scale(0.8); }

        button {
            background: var(--accent-cyan);
            color: black;
            border: none;
            padding: 18px 50px;
            font-weight: bold;
            font-size: 1.3em;
            cursor: pointer;
            border-radius: 4px;
            box-shadow: 0 0 20px rgba(0, 242, 255, 0.3);
        }
        button:disabled { background: #222; color: #555; box-shadow: none; }
    </style>
</head>
<body>

<div style="padding: 20px; text-align: center;">
    <h1 style="letter-spacing: 8px; margin: 0; font-weight: 900;">CHAMPIONS CUP 2026</h1>
    <div id="statusLine" style="color: var(--accent-cyan); margin-top: 10px; font-weight: bold;">PHASE 1: DRAW R16 AUTO-QUALIFIERS</div>
</div>

<div class="bracket-outer" id="bracket-root">
    <svg id="connector-canvas"></svg>

    <div class="round"><div class="round-title">ROUND 1</div><div id="r1-L"></div></div>
    <div class="round"><div class="round-title">ROUND 16</div><div id="r16-L"></div></div>
    <div class="round"><div class="round-title">QUARTERS</div><div id="qf-L"></div></div>

    <div class="round" style="width: 220px; justify-content: center;">
        <div class="round-title">GRAND FINAL</div>
        <div class="matchup" id="final-match" style="border: 2px solid var(--accent-cyan); height: 100px; display: flex; flex-direction: column; justify-content: center;">
            <div class="team empty">TBD</div>
            <div style="height:1px; background:rgba(0,242,255,0.2)"></div>
            <div class="team empty">TBD</div>
        </div>
    </div>

    <div class="round"><div class="round-title">QUARTERS</div><div id="qf-R"></div></div>
    <div class="round"><div class="round-title">ROUND 16</div><div id="r16-R"></div></div>
    <div class="round"><div class="round-title">ROUND 1</div><div id="r1-R"></div></div>
</div>

<div class="draw-zone">
    <button id="drawBtn" onclick="handleDraw()">START DRAW</button>
    
    <div class="pot-label">Auto-Qualifier Seed Pot</div>
    <div id="potSeeds-display" class="pot-grid" style="grid-template-columns: repeat(5, 1fr); max-width: 600px;"></div>

    <div class="pot-label">Pot A (International/Elite)</div>
    <div id="potA-display" class="pot-grid"></div>

    <div class="pot-label">Pot B (MLS Contenders)</div>
    <div id="potB-display" class="pot-grid"></div>
</div>

<script>
    const LOGOS = {
        "Aston Villa": "https://resources.premierleague.com/premierleague25/badges-alt/7.svg",
        "Leeds": "https://resources.premierleague.com/premierleague25/badges-alt/2.svg",
        "Elche": "https://ssl.gstatic.com/onebox/media/sports/logos/uyyqqxLIYT_lQIXRyMI_RA_48x48.png",
        "Miami": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747755405/assets/logos/mls-clubs/Club_Logo-Miami_tyqe64.png",
        "Atlanta": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747499879/assets/logos/mls-clubs/Club_Logo-Atlanta_jtk7ku.png",
        "Brentford": "https://resources.premierleague.com/premierleague25/badges-alt/94.svg",
        "Leicester": "https://upload.wikimedia.org/wikipedia/en/thumb/2/2d/Leicester_City_crest.svg/1200px-Leicester_City_crest.svg.png",
        "Bournemouth": "https://resources.premierleague.com/premierleague25/badges-alt/91.svg",
        "West Ham": "https://resources.premierleague.com/premierleague25/badges-alt/21.svg",
        "Valencia": "https://ssl.gstatic.com/onebox/media/sports/logos/QPbjvDwI_0Wuu4tCS2O6uw_48x48.png",
        "Real Betis": "https://ssl.gstatic.com/onebox/media/sports/logos/XDClkrMKtkm3UTP2YKN6oQ_48x48.png",
        "Osasuna": "https://ssl.gstatic.com/onebox/media/sports/logos/pk-hNCNpGM_JDoHHvLVF-Q_48x48.png",
        "Levante": "https://ssl.gstatic.com/onebox/media/sports/logos/SQB-jlVosxVV1Ce79FhbOA_48x48.png",
        "Celta Vigo": "https://ssl.gstatic.com/onebox/media/sports/logos/wpdhixHP_sloegfP0UlwAw_48x48.png",
        "Seattle": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1748265125/assets/logos/mls-clubs/Club_Logo-Seattle_e6jk2x.png",
        "Columbus": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747500414/assets/logos/mls-clubs/Club_Logo-Columbus_light_z3eq8l.png",
        "San Diego": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1748261519/assets/logos/mls-clubs/Club_Logo-San_Diego_nwpyul.png",
        "Colorado": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747500322/assets/logos/mls-clubs/Club_Logo-Colorado_n5kpss.png",
        "Salt Lake": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747776403/assets/logos/mls-clubs/Club_Logo-Salt_Lake_City_hpvde5.png",
        "Minnesota": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747754826/assets/logos/mls-clubs/Club_Logo-Minnesota_ftweor.png",
        "San Jose": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1748262048/assets/logos/mls-clubs/Club_Logo-San_Jose_opzlmo.png",
        "Charlotte": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747500045/assets/logos/mls-clubs/Club_Logo-Charlotte_p7sznf.png",
        "LA Galaxy": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747755165/assets/logos/mls-clubs/Club_Logo-LA_Galaxy_fg0wjp.png",
        "Orlando": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747769281/assets/logos/mls-clubs/Club_Logo-Orlando_ryyn7a.png",
        "LAFC": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v174775309/assets/logos/mls-clubs/Club_Logo-LAFC_djrhru.png",
        "New England": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1766020750/assets/NE_Logo_PRI_FC_RGB_480x480_fdx2us.png",
        "Chicago": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747500178/assets/logos/mls-clubs/Club_Logo-Chicago_jm2yev.png"
    };

    let seedPot = ["Aston Villa", "Elche", "Miami", "Atlanta", "Leeds"];
    let potA = ["Brentford", "Leicester", "Bournemouth", "West Ham", "Valencia", "Real Betis", "Osasuna", "Levante", "Celta Vigo", "Seattle", "Columbus"];
    let potB = ["San Diego", "Colorado", "Salt Lake", "Minnesota", "San Jose", "Charlotte", "LA Galaxy", "Orlando", "LAFC", "New England", "Chicago"];
    
    // Available R16 spots for seeds
    let seedSlots = ['r16-L-0-a', 'r16-L-1-a', 'r16-R-0-a', 'r16-R-3-a', 'r16-L-3-a'];
    
    let drawPhase = 'seeds'; // 'seeds' then 'matches'
    let currentStep = 0;

    function init() {
        const build = (id, num) => {
            for(let i=0; i<num; i++) document.getElementById(id).innerHTML += `<div class="matchup" id="match-${id}-${i}"><div class="team empty" id="${id}-${i}-a">TBD</div><div style="height:1px; background:rgba(255,255,255,0.05)"></div><div class="team empty" id="${id}-${i}-b">TBD</div></div>`;
        };
        build('r1-L', 6); build('r1-R', 5); build('r16-L', 4); build('r16-R', 4); build('qf-L', 2); build('qf-R', 2);

        seedPot.forEach(t => document.getElementById('potSeeds-display').innerHTML += `<div class="pot-team" id="pot-${t.replace(/\s/g,'')}"><img src="${LOGOS[t]}">${t}</div>`);
        potA.forEach(t => document.getElementById('potA-display').innerHTML += `<div class="pot-team" id="pot-${t.replace(/\s/g,'')}"><img src="${LOGOS[t]}">${t}</div>`);
        potB.forEach(t => document.getElementById('potB-display').innerHTML += `<div class="pot-team" id="pot-${t.replace(/\s/g,'')}"><img src="${LOGOS[t]}">${t}</div>`);
        
        setTimeout(drawConnectors, 500);
    }

    function handleDraw() {
        if (drawPhase === 'seeds') {
            drawSeed();
        } else {
            drawMatch();
        }
    }

    function drawSeed() {
        if (seedPot.length === 0) return;
        
        const randIdx = Math.floor(Math.random() * seedPot.length);
        const name = seedPot.splice(randIdx, 1)[0];
        const slotId = seedSlots.shift();

        updateBracket(name, slotId);
        document.getElementById('statusLine').innerText = `SEEDED: ${name.toUpperCase()} PLACED IN ROUND OF 16`;

        if (seedPot.length === 0) {
            drawPhase = 'matches';
            document.getElementById('drawBtn').innerText = "DRAW ROUND 1";
        }
    }

    function drawMatch() {
        if (currentStep >= 22) return;
        const pool = (currentStep % 2 === 0) ? potA : potB;
        const randIdx = Math.floor(Math.random() * pool.length);
        const name = pool.splice(randIdx, 1)[0];
        
        const mIdx = Math.floor(currentStep/2);
        const slotId = (mIdx < 6) ? `r1-L-${mIdx}-${(currentStep%2==0)?'a':'b'}` : `r1-R-${mIdx-6}-${(currentStep%2==0)?'a':'b'}`;
        
        updateBracket(name, slotId);
        document.getElementById('statusLine').innerText = (currentStep%2==1) ? `MATCHING OPPONENT FOR ${name.toUpperCase()}...` : "MATCH CONFIRMED";
        
        currentStep++;
        if(currentStep == 22) {
            document.getElementById('drawBtn').disabled = true;
            document.getElementById('statusLine').innerText = "DRAW COMPLETE";
        }
    }

    function updateBracket(name, slotId) {
        document.getElementById(`pot-${name.replace(/\s/g,'')}`).classList.add('drawn');
        const slot = document.getElementById(slotId);
        slot.innerHTML = `<img src="${LOGOS[name]}"> ${name}`;
        slot.classList.add('sliding-in');
        slot.classList.remove('empty');
        if (drawPhase === 'seeds') slot.classList.add('pre-seeded');
        
        setTimeout(() => slot.classList.add('slide-active'), 50);
    }

    function drawConnectors() {
        const svg = document.getElementById('connector-canvas');
        svg.innerHTML = '';
        const rootRect = document.getElementById('bracket-root').getBoundingClientRect();

        const connect = (fromId, toId) => {
            const f = document.getElementById(fromId).getBoundingClientRect();
            const t = document.getElementById(toId).getBoundingClientRect();
            const x1 = f.right - rootRect.left;
            const y1 = f.top + f.height/2 - rootRect.top;
            const x2 = t.left - rootRect.left;
            const y2 = t.top + t.height/2 - rootRect.top;
            const midX = x1 + (x2 - x1) / 2;
            
            const path = document.createElementNS("http://www.w3.org/2000/svg", "polyline");
            path.setAttribute("points", `${x1},${y1} ${midX},${y1} ${midX},${y2} ${x2},${y2}`);
            path.setAttribute("stroke", "rgba(0, 242, 255, 0.3)");
            path.setAttribute("fill", "none");
            path.setAttribute("stroke-width", "2");
            svg.appendChild(path);
        };

        // Left Connectors (Lanes to QF)
        connect('match-r1-L-0', 'match-r16-L-0'); connect('match-r1-L-1', 'match-r16-L-1');
        connect('match-r1-L-2', 'match-r16-L-2'); connect('match-r1-L-3', 'match-r16-L-2');
        connect('match-r1-L-4', 'match-r16-L-3'); connect('match-r1-L-5', 'match-r16-L-3');
        
        // Right Connectors
        connect('match-r1-R-0', 'match-r16-R-0'); connect('match-r1-R-1', 'match-r16-R-1');
        connect('match-r1-R-2', 'match-r16-R-1'); connect('match-r1-R-3', 'match-r16-R-2');
        connect('match-r1-R-4', 'match-r16-R-2');
    }

    window.addEventListener('resize', drawConnectors);
    init();
</script>
</body>
</html>
